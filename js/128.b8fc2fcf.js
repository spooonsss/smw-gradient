"use strict";(globalThis["webpackChunkdefecttool"]=globalThis["webpackChunkdefecttool"]||[]).push([[128],{3128:(n,e,o)=>{o.r(e),o.d(e,{default:()=>Sn});var a=o(1758),l=o(8790);const t={class:"column"},r={style:{}};function i(n,e,o,i,d,c){const u=(0,a.g2)("q-select"),s=(0,a.g2)("q-btn"),h=(0,a.g2)("PositionAdjust"),m=(0,a.g2)("q-badge"),p=(0,a.g2)("InternalColor"),b=(0,a.g2)("q-input"),f=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(f,{class:"flex flex-center",style:{"padding-top":"1em"}},{default:(0,a.k6)((()=>[(0,a.Lk)("div",t,[e[10]||(e[10]=(0,a.Lk)("canvas",{id:"c_numbers"},null,-1)),(0,a.Lk)("canvas",{id:"c",onClick:e[0]||(e[0]=e=>n.handleClick(e.offsetY/e.target.height,e.offsetX/e.target.width)),onMouseleave:e[1]||(e[1]=e=>n.mouseOver(void 0,void 0)),onMouseover:e[2]||(e[2]=e=>n.mouseOver(e.offsetY/e.target.height,e.offsetX/e.target.width)),onMousemove:e[3]||(e[3]=e=>n.mouseOver(e.offsetY/e.target.height,e.offsetX/e.target.width)),onWheel:e[4]||(e[4]=e=>n.canvasWheel(e))},null,32),(0,a.Lk)("span",r,"  "+(0,l.v_)(n.tooltip),1),(0,a.bF)(u,{filled:"",modelValue:n.clickMode,"onUpdate:modelValue":e[5]||(e[5]=e=>n.clickMode=e),label:"Click mode","map-options":"","emit-value":"",options:["Add","Skip color"],behavior:"menu"},null,8,["modelValue"])]),(0,a.bF)(s,{round:"",color:"primary",icon:"add_circle",onClick:e[6]||(e[6]=e=>n.addInternal(void 0))}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.internalData,((o,t)=>((0,a.uX)(),(0,a.CE)("div",{class:"column",key:o},[(0,a.bF)(m,{color:"secondary",style:{"margin-bottom":"0.2em"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(0==t?"Start":t==n.internalData.length-1?"End":"Internal "+t)+" :   ",1),(0,a.bF)(h,{modelValue:n.internalData[t],"onUpdate:modelValue":e=>n.internalData[t]=e,max:n.scanlinesRef},null,8,["modelValue","onUpdate:modelValue","max"])])),_:2},1024),(0,a.bF)(p,{modelValue:n.internalData[t],"onUpdate:modelValue":e=>n.internalData[t]=e,max:n.scanlinesRef},null,8,["modelValue","onUpdate:modelValue","max"]),(0,a.bF)(s,{onClick:e=>n.removeInternal(t),disable:n.internalData.length<=2},{default:(0,a.k6)((()=>e[11]||(e[11]=[(0,a.eW)("del")]))),_:2},1032,["onClick","disable"])])))),128)),(0,a.Lk)("div",null,[(0,a.bF)(b,{filled:"",modelValue:n.quantize,"onUpdate:modelValue":e[7]||(e[7]=e=>n.quantize=e),modelModifiers:{number:!0},label:"Step Size",type:"number",min:"1",rules:[n=>n&&n>0||"Must be 1 or larger",n=>n&&Math.round(n)===n||"Must be integer"]},null,8,["modelValue","rules"]),(0,a.bF)(b,{filled:"",modelValue:n.quantizeStart,"onUpdate:modelValue":e[8]||(e[8]=e=>n.quantizeStart=e),modelModifiers:{number:!0},label:"Step Offset",type:"number",rules:[n=>Math.round(n)===n||"Must be integer"]},null,8,["modelValue","rules"]),(0,a.bF)(s,{color:"white","text-color":"black",label:"Download .png",onClick:n.downloadGradient},null,8,["onClick"]),e[12]||(e[12]=(0,a.Lk)("br",null,null,-1)),e[13]||(e[13]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",null,[(0,a.bF)(u,{style:{width:"200px"},filled:"",modelValue:n.selectedGradientType,"onUpdate:modelValue":e[9]||(e[9]=e=>n.selectedGradientType=e),label:"Gradient number","map-options":"","emit-value":"",options:["RGB (naive)","RGB gamma corrected","LAB","Linear RGB interpolation","HSV","HSV (reverse)"].map(((n,e)=>({label:e+1+" "+n,value:e+""}))),behavior:"menu"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[(0,a.bF)(s,{color:"white","text-color":"black",label:"Copy BG Code",onClick:n.copyCode},null,8,["onClick"]),(0,a.bF)(s,{color:"white","text-color":"black",label:"Copy Color Code",onClick:n.copyColorCode},null,8,["onClick"]),n.scanlinesRef>224?((0,a.uX)(),(0,a.Wv)(s,{key:0,color:"white","text-color":"black",label:"Copy Scrolling BG Code",onClick:n.copyScrollingBGCode},null,8,["onClick"])):(0,a.Q3)("",!0),n.scanlinesRef>224?((0,a.uX)(),(0,a.Wv)(s,{key:1,color:"white","text-color":"black",label:"Copy Scrolling Color Code",onClick:n.copyScrollingColorCode},null,8,["onClick"])):(0,a.Q3)("",!0),n.scanlinesRef>224?((0,a.uX)(),(0,a.Wv)(s,{key:2,color:"white","text-color":"black",label:"Copy Scrolling Dual Color Code",onClick:n.copyScrollingDualColorCode},null,8,["onClick"])):(0,a.Q3)("",!0)])])])),_:1})}o(310),o(317),o(95),o(6724),o(2802);var d=o(8734),c=o(1627),u=o(455);function s(n,e,o,l,t,r){const i=(0,a.g2)("q-slider"),d=(0,a.g2)("q-color");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(i,{modelValue:r.value.position,"onUpdate:modelValue":e[0]||(e[0]=n=>r.value.position=n),min:0,max:o.max,"inner-min":r.value.start,"inner-max":r.value.end},null,8,["modelValue","max","inner-min","inner-max"]),(0,a.bF)(d,{modelValue:r.color,"onUpdate:modelValue":e[1]||(e[1]=n=>r.color=n)},null,8,["modelValue"])],64)}const h={props:["modelValue","max"],emits:["update:modelValue"],computed:{color:{get(){return"#"+this.modelValue.color},set(n){this.value.color=n.substring(1)}},value:{get(){return this.modelValue},set(n){this.$emit("update:modelValue",n)}}}};var m=o(2807),p=o(1444),b=o(3321),f=o(8582),v=o.n(f);const g=(0,m.A)(h,[["render",s]]),C=g;function A(n,e,o,t,r,i){const d=(0,a.g2)("q-btn");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(d,{round:"",dense:"",color:"primary",size:"xs",icon:"arrow_drop_down",onClick:t.onDown,disable:o.modelValue.start>=o.modelValue.position},null,8,["onClick","disable"]),(0,a.eW)("   "+(0,l.v_)(i.value.position)+"   ",1),(0,a.bF)(d,{round:"",dense:"",color:"primary",size:"xs",icon:"arrow_drop_up",onClick:t.onUp,disable:o.modelValue.end<=o.modelValue.position},null,8,["onClick","disable"])],64)}v()(h,"components",{QSlider:p.A,QColor:b.A});const w={props:["modelValue","max"],emits:["update:modelValue"],setup(n,e){function o(){const o={...n.modelValue};o["position"]--,e.emit("update:modelValue",o)}function a(){const o={...n.modelValue};o["position"]++,e.emit("update:modelValue",o)}return{onDown:o,onUp:a}},computed:{value:{get(){return this.modelValue},set(n){this.$emit("update:modelValue",n)}}}};var S=o(2374);const $=(0,m.A)(w,[["render",A]]),T=$;v()(w,"components",{QBtn:S.A});var _=o(2507),D=o(3611),L=o.n(D);const y=(0,d.KR)([]),M=(0,d.KR)(1),R=(0,d.KR)(1),k=(0,d.KR)(1),x=(0,d.KR)(""),F=(0,d.KR)("Add");var V,E,I;(0,a.wB)([y],((n,e)=>{const o=y.value;var a=0;o.length&&(o[0].position=a=Math.max(a,o[0].position),o[0].start=0,o[o.length-1].end=G);for(var l=0;l<o.length-1;l++)o[l+1].position=a=Math.max(a,o[l+1].position),o[l].end=o[l+1].position,o[l+1].start=o[l].position}),{deep:!0}),(0,a.wB)([y,R,k],j,{deep:!0});var B,Y=(0,d.KR)(2),G=224,P=(0,d.KR)(224);const U=6;(0,a.wB)([Y,P],(function(){I&&(I.height=P.value*Y.value,j())}));var O=function(){I=document.getElementById("c"),B=I.getContext("2d"),I.width=240-240%U,I.height=G*Y.value,j();const n=document.getElementById("c_numbers");n.width=I.width,n.height=20;const e=n.getContext("2d");B.font="48px serif";const o=B.measureText("12345");n.height=o.fontBoundingBoxAscent+5;for(var a=0;a<U;a++)e.fillText(a+1,10+n.width*a/U,o.fontBoundingBoxAscent)};function q(n){var e=n.match(/^([0-9a-f]{6})$/i)[1];if(e)return[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)]}function K(n,e,o){let a=(a,l=(a+n/60)%6)=>o-o*e*Math.max(Math.min(l,4-l,1),0);return[a(5),a(3),a(1)]}function Q(n,e,o){let a=Math.max(n,e,o),l=a-Math.min(n,e,o),t=l&&(a==n?(e-o)/l:a==e?2+(o-n)/l:4+(n-e)/l);return[60*(t<0?t+6:t),a&&l/a,a]}function X(n){return n<=.0031308?12.92*n:1.055*n**(1/2.4)-.055}function W(n){return Math.floor(255.9999*X(n))}function z(n){var e;return n/=255,e=n<=.04045?n/12.92:((n+.055)/1.055)**2.4,e}function j(){if(!B||y.value.length<2)return;const n=q(y.value[0].color),e=q(y.value[y.value.length-1].color),o=y.value[0].position,a=y.value[y.value.length-1].position;var l;for(V=Array(U).fill(1).map((()=>[])),l=0;l<o;l++)V.forEach((e=>e.push(n)));function t(n,e,o,a){var l;function t(n,e,t){const r=G-o-(G-a);return n[t]==e[t]?n[t]:n[t]*((r-l)/r)+e[t]*(l/r)}function r(n,e){return[0,1,2].map(((o,a)=>t(n,e,a)))}function i(o){var a=t(n,e,o);return a}const d=Q.apply(null,n.map((n=>n/255))),c=Q.apply(null,e.map((n=>n/255)));function u(n){return t(d,c,n)}const s=bn(n),h=bn(e),m=.43,p=n.map(z),b=p.reduce(((n,e)=>n+e))**m,f=e.map(z),v=f.reduce(((n,e)=>n+e))**m,g=_.A.scale([n,e]).mode("lrgb").domain([0,G-o-(G-a)-1]),[C,A,w,S,$,T]=V;for(l=0;l<G-o-(G-a);l++){C.push([i(0),i(1),i(2)]);var D=t([b],[v],0)**(1/m),L=[0,1,2].map((n=>t(p,f,n))),y=L.reduce(((n,e)=>n+e));0!=y&&(L=L.map((n=>n*D/y))),L=L.map((n=>Math.min(1,n))),L=L.map((n=>Math.max(0,n))),L=L.map(W),A.push([L[0],L[1],L[2]]),$.push(K.apply(null,[0,1,2].map(u)).map((n=>255*n)));var M=[0,1,2].map(u);if(d[0]>c[0]?M[0]=t([d[0]],[c[0]+360],0):M[0]=t([d[0]+360],[c[0]],0),M[0]=(M[0]+720)%360,T.push(K.apply(null,M).map((n=>255*n))),Math.abs(d[0]-c[0])>180){const[n,e]=[T.pop(),$.pop()];T.push(e),$.push(n)}w.push(fn(r(s,h,l)));var R=w.slice(-1)[0];R[0]>255||R[1]>255||R[2],S.push(g(l).rgb())}}for(l=0;l<y.value.length-1;l++)t(q(y.value[l].color),q(y.value[l+1].color),y.value[l].position,y.value[l+1].position);for(l=0;l<G-a;l++)V.forEach((n=>n.push(e)));E=V.map((n=>n.map((n=>n.map((n=>8*(n>>3)+(n>>5))))))),R.value&&(E=E.map((n=>n.map(((e,o)=>n[Math.max(0,o-(o-k.value)%R.value)])))));var r=V.length;function i(n){B.fillRect(I.width*(n/r),l,I.width*(1/r),1),n=(n+1)%r}for(B.clearRect(0,0,I.width,I.height),l=0;l<I.height;l++)E.forEach(((n,e)=>{B.fillStyle="rgb("+n[Math.floor(l/(I.height/G))]+")",i(e)}))}function H(){L()(I.toDataURL("image/png"),"gradient.png")}function N(n,e){if(void 0!==n){e=Math.floor(V.length*e),e=Math.min(e,V.length-1),n=Math.floor(G*n),n=Math.min(n,V[e].length-1);var o=V[e][n],a=Z(o),l=Z(o.map((n=>8*(n>>3)+(n>>5))));x.value=`${n}: ${a}  (SNES: ${l}) `}else x.value=""}function J(n){y.value.splice(n,1)}function Z(n){return n.map((n=>(n|0).toString(16).padStart(2,"0"))).join("")}function nn(n){n.deltaY&&(Y.value=Y.value+(n.deltaY>0?1:-1),Y.value=Math.max(1,Y.value),n.preventDefault(),n.stopPropagation())}function en(n,e){var o=F.value||"Add";if("Add"===o)on(n,e);else{e=Math.floor(V.length*e),e=Math.min(e,V.length-1),n=Math.floor(G*n),n=Math.min(n,V[e].length-1);const o=V[e],i=E[e];var a=Z(i[n]),l=i.findIndex((n=>Z(n)===a))-1,t=n+i.slice(n).findIndex((n=>Z(n)!==a));if(-1===l||t-n===-1)return;const d=Math.floor(l+(t-l)/2);var r;while(1){if(r=y.value.findIndex((n=>n.position>=l&&n.position<=t)),-1===r)break;y.value.splice(r,1)}for(r=0;r<y.value.length;r++)if(y.value[r].position>d)break;r=Math.max(0,r),y.value.splice(r,0,{color:Z(o[l]),start:0,end:G,position:l},{color:Z(o[l]),start:0,end:G,position:d},{color:Z(o[t]),start:0,end:G,position:d+1},{color:Z(o[t]),start:0,end:G,position:t})}}function on(n,e){void 0===n?(n=Math.floor(G/2),e=1):(e=Math.floor(V.length*e),e=Math.min(e,V.length-1),n=Math.floor(G*n),n=Math.min(n,V[e].length-1));var o,a=V[e][n],l=Z(a);for(o=0;o<y.value.length;o++)if(y.value[o].position>n)break;o=Math.max(0,o),y.value.splice(o,0,{color:l,start:0,end:G,position:n})}function an(n){for(var e=void 0,o=[],a=(n,e)=>n.length===e.length&&n.every(((n,o)=>n===e[o])),l=0;l<n.length;l++)l>0&&a(e,n[l])?o[o.length-1][0]++:(o.push([1,...n[l]]),e=n[l]);return o}function ln(n){const e=[0,5,10];return n.map(((n,o)=>n>>3<<e[o])).reduce(((n,e)=>n+e))}function tn(){function n(n){var e="";return n.forEach(((o,a)=>{var l=o[0];do{a==n.length-1?(e+="db  1",l=0):e+=`db ${Math.min(l,127).toString().padStart(2," ")}`,e+=" : db 0, !destination_color";const t=ln(o.slice(1));e+=` : dw $${t.toString(16)}`,e+="\n",l-=127}while(l>0)})),e}const e=E[M.value],o=an(e),a=n(o);var l=`\n; Color gradient ${y.value[0].color} to ${y.value[y.value.length-1].color}\n; generated from ${window.location.href}\n\n!hdma_channel1 = 3\n!destination_color = $56\n\n!hdma_base1 #= $4300|(!hdma_channel1<<4)\n\ninit:\nREP #$20\nLDA #$2103  ; CGADD 2121\nSTA.w !hdma_base1\nLDA.w #.ColorTable\nSTA.w !hdma_base1+2\nLDY.b #.ColorTable>>16\nSTY.w !hdma_base1+4\n\nSEP #$20\nLDA.b #(1<<!hdma_channel1)\nTSB $0D9F|!addr\nRTL\n\n.ColorTable:\n${a}\ndb 0\n`;navigator.clipboard.writeText(l).then((function(){c.A.create("Copied!")}),(function(n){c.A.create("Could not copy: "+n),console.error("Async: Could not copy text: ",n)}))}function rn(n,e,o){return n.map((n=>[n[e],n[o]]))}function dn(){const n=E[M.value],e=an(rn(n,0,1)),o=an(rn(n,0,2)),a=an(rn(n,1,2)),l=[e,o,a],t=Math.min(...l.map((n=>n.length))),r=l.findIndex((n=>n.length===t)),i={0:2,1:1,2:0}[r],d=an(n.map((n=>[n[i]])));function u(n,e){var o="";return n.forEach(((a,l)=>{var t=a[0];do{l==n.length-1?(o+="db 1",t=0):o+=`db ${Math.min(t,127)}`,a.slice(1).forEach(((n,a)=>{o+=` : db $${(n>>3|e[a]).toString(16)}`})),o+="\n",t-=127}while(t>0)})),o}const s=u(d,[[32,64,128][i]]),h=u(l[r],[[32,64],[32,128],[64,128]][r]);var m=`\n; Background gradient ${y.value[0].color} to ${y.value[y.value.length-1].color}\n; generated from ${window.location.href}\n\n!hdma_channel1 = 3\n!hdma_channel2 = 4\n\n!hdma_base1 #= $4300|(!hdma_channel1<<4)\n!hdma_base2 #= $4300|(!hdma_channel2<<4)\n\ninit:\nREP #$20\nLDA #$3206\nSTA.w !hdma_base1\nLDA.w #.DoubleTable\nSTA.w !hdma_base1+2\nLDY.b #.DoubleTable>>16\nSTY.w !hdma_base1+4\nLDA #$3200\nSTA.w !hdma_base2\nLDA.w #.SingleTable\nSTA.w !hdma_base2+2\nLDY.b #.SingleTable>>16\nSTY.w !hdma_base2+4\n\nSEP #$20\nLDA.b #(1<<!hdma_channel1)|(1<<!hdma_channel2)\nTSB $0D9F|!addr\nRTL\n\n.DoubleTable:\n${h}\ndb 0\n\n.SingleTable:\n${s}\ndb 0\n`;navigator.clipboard.writeText(m).then((function(){c.A.create("Copied!")}),(function(n){c.A.create("Could not copy: "+n),console.error("Async: Could not copy text: ",n)}))}function cn(){function n(n){var e="";return n.forEach(((n,o)=>{const a=ln(n);e+=`dw $${a.toString(16)}`,e+="\n"})),e}const e=E[M.value],o=n(e);var a=`\n; Scrolling dual color gradient ${y.value[0].color} to ${y.value[y.value.length-1].color}\n; generated from ${window.location.href}\n\n!FreeRAM = $7FC3E0 ; 12 bytes\n\n!hdma_channel1 = 3\n!hdma_channel2 = 4 ; should be the next one, or have no color hdmas between them\n!hdma_channel3 = 5 ; should be the next one, or have no color hdmas between them\n\n!destination_color1 = $43\n; destination_color2 is the next one\n\n; layer to scroll compared to\n!Layer = 1\n; higher values scroll more slowly\n!ScrollFactor = 0\n\n!Overworld = 1\n\n; number of scanlines 2nd color will be ahead of 1st\n!Offset = 3\n\n; end of configuration\n\n!hdma_base1 #= $4300|(!hdma_channel1<<4)\n!hdma_base2 #= $4300|(!hdma_channel2<<4)\n!hdma_base3 #= $4300|(!hdma_channel3<<4)\n\nCGADDTable:\ndb $F0\n!i #= 0\nwhile !i < $70\ndb !destination_color1\n!i #= !i+1\nendif\ndb $F0\n!i #= 0\nwhile !i < $70\ndb !destination_color1\n!i #= !i+1\nendif\n\ninit:\n\nLDA.b #(1<<!hdma_channel1)|(1<<!hdma_channel2)|(1<<!hdma_channel3)\nTSB $0D9F|!addr\n\nLDA #$F0\nSTA !FreeRAM\nSTA !FreeRAM+3\nSTA !FreeRAM+6\nSTA !FreeRAM+9\n\nREP #$20\nLDA #$2100 ; CGADD 2121\nSTA.w !hdma_base1\nLDA.w #CGADDTable\nSTA.w !hdma_base1+2\nLDY.b #CGADDTable>>16\nSTY.w !hdma_base1+4\n\nLDA #$2242 ; CGDATA 2122; indirect, one register write twice\nSTA.w !hdma_base2\nSTA.w !hdma_base3\n\nLDA.w #!FreeRAM\nSTA.w !hdma_base2+2\nLDA.w #!FreeRAM+6\nSTA.w !hdma_base3+2\n\nLDY.b #!FreeRAM>>16\nSTY.w !hdma_base2+4\nSTY.w !hdma_base3+4\n\nLDY.b #ColorTable>>16\nSTY.w !hdma_base2+7\nSTY.w !hdma_base3+7\n\n; RTL fallthrough\n\nend:\nREP #$31\nLDA.b $1C+((!Layer-1)*2)\nif !Overworld\n; CLC\nADC.w #$0028 ; overworld goes negative\nendif\nLSR #!ScrollFactor\n; CLC\nASL\n; CLC\nADC.w #ColorTable\n; it is possible that hdma runs in between the RAM writes and gets a bogus value\nSTA !FreeRAM+1\nADC.w #!Offset*2\nSTA !FreeRAM+1+6\nADC.w #($70*2)-(!Offset*2)\nSTA !FreeRAM+1+3\nADC.w #!Offset*2\nSTA !FreeRAM+1+9\nSEP #$30\nRTL\n\nColorTable:\n${o}\n`;navigator.clipboard.writeText(a).then((function(){c.A.create("Copied!")}),(function(n){c.A.create("Could not copy: "+n),console.error("Async: Could not copy text: ",n)}))}function un(){function n(n){var e="";return n.forEach(((n,o)=>{e+="db 1",e+=" : db 0, !destination_color";const a=ln(n);e+=` : dw $${a.toString(16)}`,e+="\n"})),e}const e=E[M.value],o=n(e);var a=`\n; Scrolling color gradient ${y.value[0].color} to ${y.value[y.value.length-1].color}\n; generated from ${window.location.href}\n\n!hdma_channel1 = 3\n!destination_color = $44\n\n; layer to scroll with\n!Layer = 1\n; higher values scroll more slowly\n!ScrollFactor = 0\n!Overworld = 0\n\n; end of configuration\n\n!hdma_base1 #= $4300|(!hdma_channel1<<4)\n\ninit:\nLDA.b #(1<<!hdma_channel1)\nTSB $0D9F|!addr\n\nREP #$20\nLDA #$2103  ; CGADD 2121\nSTA.w !hdma_base1\n;LDA.w #ColorTable\n;STA.w !hdma_base1+2\nLDY.b #ColorTable>>16\nSTY.w !hdma_base1+4\n\n; SEP #$20\n; RTL fallthrough\n\nend:\nREP #$21\nLDA.b $1C+((!Layer-1)*2)\nif !Overworld\n; CLC\nADC.w #$0028 ; overworld goes negative\nendif\nLSR #!ScrollFactor\nSTA $00\nASL\nASL\n; CLC\nADC $00\n; CLC\nADC #ColorTable\n; if the game is lagging, it is possible that hdma init runs in between the RAM writes and gets a bogus value\nSTA.w !hdma_base1+2\nSEP #$20\nRTL\n\nColorTable:\n${o}\ndb 0\n`;navigator.clipboard.writeText(a).then((function(){c.A.create("Copied!")}),(function(n){c.A.create("Could not copy: "+n),console.error("Async: Could not copy text: ",n)}))}function sn(){const n=E[M.value],e=rn(n,0,1),o=n.map((n=>[n[2]]));function a(n,e){var o="";return n.forEach(((n,a)=>{o+="db 1",n.forEach(((n,a)=>{o+=` : db $${(n>>3|e[a]).toString(16)}`})),o+="\n"})),o}const l=a(e,[32,64]),t=a(o,[128]);var r=`\n; Scrolling background gradient ${y.value[0].color} to ${y.value[y.value.length-1].color}\n; generated from ${window.location.href}\n!hdma_channel1 = 3\n!hdma_channel2 = 4\n\n; Layer to scroll with\n!Layer = 1\n; Higher values scroll more slowly\n!ScrollFactor = 0\n; Set to 1 if used on the overworld\n!Overworld = 0\n\n; end of configuration\n\n!hdma_base1 #= $4300|(!hdma_channel1<<4)\n!hdma_base2 #= $4300|(!hdma_channel2<<4)\n\ninit:\nREP #$20\nLDA #$3206\nSTA.w !hdma_base1\n;LDA.w #DoubleTable\n;STA.w !hdma_base1+2\nLDY.b #DoubleTable>>16\nSTY.w !hdma_base1+4\nLDA #$3200\nSTA.w !hdma_base2\n;LDA.w #SingleTable\n;STA.w !hdma_base2+2\nLDY.b #SingleTable>>16\nSTY.w !hdma_base2+4\n\nSEP #$20\nLDA.b #(1<<!hdma_channel1)|(1<<!hdma_channel2)\nTSB $0D9F|!addr\n; RTL fallthrough\n\nend:\nREP #$31\nLDA.b $1C+((!Layer-1)*2)\nif !Overworld\n; CLC\nADC.w #$0028 ; overworld goes negative\nendif\nLSR #!ScrollFactor\nSTA $00\nASL\n; CLC\nADC $00\n; CLC\nADC #DoubleTable\n; if the game is lagging, it is possible that snes hdma init runs in between the RAM writes and gets a bogus value\nSTA.w !hdma_base1+2\n\nLDA.b $1C+((!Layer-1)*2)\nif !Overworld\nCLC\nADC.w #$0028\nendif\nLSR #!ScrollFactor\nASL\n; CLC\nADC.w #SingleTable\nSTA.w !hdma_base2+2\nSEP #$30\nRTL\n\nDoubleTable:\n${l}\ndb 0\n\nSingleTable:\n${t}\ndb 0\n`;navigator.clipboard.writeText(r).then((function(){c.A.create("Copied!")}),(function(n){c.A.create("Could not copy: "+n),console.error("Async: Could not copy text: ",n)}))}const hn=(0,a.pM)({name:"IndexPage",components:{InternalColor:C,PositionAdjust:T},mounted:O,setup:function(){const n=[y,M,P,R,k];function e(e){n[1].value=decodeURIComponent(e[1]),n[2].value=decodeURIComponent(e[2]),G=parseInt(decodeURIComponent(e[2])),P.value=parseInt(decodeURIComponent(e[2])),R.value=parseInt(decodeURIComponent(e[3])),k.value=parseInt(decodeURIComponent(e[4]));const o=e[0],a=o.split("_");y.value=a.map((n=>{const[e,o]=n.split("-");return{color:e,position:o,start:0,end:G}}))}const o=(0,u.lq)();(0,a.wB)((()=>o.params.pathMatch),((n,o)=>{e(n)})),e(o.params.pathMatch);(0,u.rd)();return(0,a.wB)(n,pn((function(){for(var e="/v4",o=0;o<n.length;o++){var a=n[o].value;0==o&&(a=y.value.map((n=>`${n.color}-${n.position}`)).join("_")),e+="/"+encodeURIComponent(a)}history.pushState(null,null,"#"+e)})),{deep:!0}),{draw:j,downloadGradient:H,copyCode:dn,copyColorCode:tn,copyScrollingBGCode:sn,copyScrollingColorCode:un,copyScrollingDualColorCode:cn,selectedGradientType:M,internalData:y,addInternal:on,removeInternal:J,mouseOver:N,tooltip:x,clickMode:F,handleClick:en,canvasWheel:mn(nn),scanlinesRef:P,quantize:R,quantizeStart:k}}});function mn(n,e=300){let o,a=!0;return(...l)=>{a&&(n.apply(this,l),a=!1,o=setTimeout((()=>{a=!0}),e))}}function pn(n,e=300){let o;return(...a)=>{clearTimeout(o),o=setTimeout((()=>{n.apply(this,a)}),e)}}function bn(n){return _.A.rgb(n).lab()}function fn(n){return _.A.lab(n).rgb()}var vn=o(7716),gn=o(1036),Cn=o(3954),An=o(9270);const wn=(0,m.A)(hn,[["render",i]]),Sn=wn;v()(hn,"components",{QPage:vn.A,QSelect:gn.A,QBtn:S.A,QBadge:Cn.A,QInput:An.A})}}]);